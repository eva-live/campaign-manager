(function(){var e,a,t,n,l,r,i;r="undefined"!=typeof exports&&null!==exports?exports:this,r.map=null,r.mapOverlay=null,l="mapCanvasId",n='<div id="mapCanvasId" class="form-control" style="width:100%;height:400px;padding:0px;">Map goes here</div>',n+='<span id="mapAddCircle" class="badge badge-pink crosshair" title="Add a circle overlay to the map">Add Area</span>',n+='&nbsp;&nbsp;&nbsp;&nbsp;<span id="mapDeleteCircle" class="badge badge-grey crosshair" title="Remove the circle overlay.">Remove Area</span>',n+='<input type="hidden" id="mapzoom">',n+='<input type="hidden" id="mapcenter_lat">',n+='<input type="hidden" id="mapcenter_lng">',i=function(){var e;return e=r.map.getZoom(),$("#mapzoom").val(e)},e=function(e){var a,t,n,l;return a=r.map.getCenter(),n=a.lat(),l=a.lng(),t="#FF0066",e=isNaN(e)||null===e||""===e?1e3:Number(e),r.mapOverlay&&r.mapOverlay.setMap(null),r.mapOverlay=new google.maps.Circle({strokeColor:t,strokeOpacity:.8,strokeWeight:2,fillColor:t,fillOpacity:.35,editable:!0,map:r.map,center:new google.maps.LatLng(n,l),radius:e})},t=function(){return r.mapOverlay&&r.mapOverlay.setMap(null),r.mapOverlay=null},a=function(e,a){return(isNaN(e)||""===e||null===e)&&(e=a),Number(e)},$(document).ready(function(){return console.log("Loading targets coffeescript"),$("select.nosearch").select2({minimumResultsForSearch:1/0}),$("select.search").select2({multiple:"multiple",placeholder:"select multiple entries, enter text to filter list"}),$(".datepicker").datetimepicker({format:"MM/DD/YYYY h:mm A"}),$('select[name="target[campaign_id]"').on("change",function(){var e;return e=$(this).val(),$.ajax("/getCampaignDates",{type:"GET",data:{id:$(this).val()},success:function(e){return e=JSON.parse(e),$('input[name="activate_time"]').val(e.start).change(),$('input[name="expire_time"]').val(e.end).change()}})}),$(".mapdialog").on("click",function(){return BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,message:n,onshown:function(){var n,l,i,o,p,s,c;return n=37.8236,l=-122.4211,o=a($("input[name='target[geo_latitude]']").val(),n),p=a($("input[name='target[geo_longitude]']").val(),l),c=$("input[name='target[geo_range]']").val(),i=8,s={zoom:i,center:{lat:o,lng:p},mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!1,zoomControl:!0},r.map=new google.maps.Map(document.getElementById("mapCanvasId"),s),isNaN(c)||""===c||null===c||e(Number(c)),$("#mapAddCircle").on("click",function(){return e(c)}),$("#mapDeleteCircle").on("click",function(){return t()})},buttons:[{label:"Cancel",cssClass:"btn btn-sm btn-default",action:function(e){return e.close()}},{label:"Save",cssClass:"btn btn-sm btn-primary",action:function(e){var a,t,n,l;return r.mapOverlay?(l=parseInt(r.mapOverlay.getRadius()),a=r.mapOverlay.getCenter(),t=Math.round(1e5*a.lat())/1e5,n=Math.round(1e5*a.lng())/1e5,console.log("circle lat="+t+",lng="+n)):(t="",n="",l=""),$("input[name='target[geo_latitude]']").val(t),$("input[name='target[geo_longitude]']").val(n),$("input[name='target[geo_range]']").val(l),e.close()}}]})})})}).call(this);